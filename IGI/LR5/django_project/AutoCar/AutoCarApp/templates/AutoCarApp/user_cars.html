{% extends 'AutoCarApp/base.html' %}
{% block content %}
<h1>Cars and Their Balances</h1>
{% if cars_with_balance %}
<ul>
{% for car in cars_with_balance %}
<li>
{{ car.car.auto_model }}, {{ car.car.number }} - Balance: {{ car.balance }}.
{% if car.parking_spot %}
Parking spot: {{ car.parking_spot.number }}, price: {{ car.parking_spot.price }}$ per month
{% else %}
No spot
{% endif %}
<form action="{% url 'replenish_balance' car.car.id %}" method="post" style="display: inline;">
    {% csrf_token %}
    <input type="number" name="amount" placeholder="Amount" min="1" required>
    <button type="submit">Replenish Car Balance</button>
</form>
<form action="{% url 'edit_car' car.car.id %}" method="get" style="display: inline;">
    <button type="submit">Edit Car</button>
</form>
<form action="{% url 'delete_car' car.car.id %}" method="post" style="display: inline;">
    {% csrf_token %}
    <button type="submit" onclick="return confirm('Are you sure you want to delete this car?');">Delete Car</button>
</form>
<form action="{% url 'remove_from_spot' car.car.id %}" method="post" style="display: inline;">
    {% csrf_token %}
    <button type="submit">Remove from Spot</button>
</form>
</li>
{% endfor %}
</ul>
{% else %}
<p>No cars available.</p>
{% endif %}
<a href="{% url 'add_car' %}">Add a Car</a>
{% endblock content %}
